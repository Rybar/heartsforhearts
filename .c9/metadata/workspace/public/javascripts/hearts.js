{"changed":true,"filter":false,"title":"hearts.js","tooltip":"/public/javascripts/hearts.js","value":"var H = { \n    heartData : [],\n    chunkIndex : 0,\n    total : 0,\n    chunk : [],\n    page : 20,\n    heartLimit : false\n};\n\nWebFont.load({\n    google: {\n      families: ['Shadows Into Light Two']\n    },\n    \n    custom: {\n    families: ['heartsregular'],\n  }\n  });\n\n\n$(document).ready(function() {\n    // jQuery AJAX call for JSON\n    $.getJSON('/users/heartlist', function(data) {\n        H.heartData = data; //store JSON data in global object.\n        updateProgressBar(H.heartData);\n        onGetHearts();\n    });\n\n    $(window).scroll( function() {\n\n        if($(window).scrollTop() + $(window).height() + 50 > $(document).height()) {\n            onGetHearts();\n            }\n    });\n    \n    //cache container and create packery instance\n    H.container = $('#container');\n    H.container.packery({\n        'selector' : '.heart'\n    });\n    H.container.packery(\"layout\");\n    \n    //moving this into onGetHearts()\n    // if(qJustGivingID) {\n     \n    //     var DuplicateHeartSearch = H.heartData.filter(function(obj) {\n    //         return obj.justGivingID == qJustGivingID;\n    //     }),\n    //     DuplicateHeartSearchObject = DuplicateHeartSearch[0];\n    //     console.log(DuplicateHeartSearchObject);\n    //     if (DuplicateHeartSearchObject === undefined || null) {\n    //         console.log('make a new heart');\n    //         addHeart();\n    //     } else {\n    //         console.log(\"don't make a new heart\");\n    //     }    \n    // }\n    \n    H.container.on(\"click\", \".heart\", function(event) {\n        activateModal();\n        populateModal($(this).data('id') );\n    });\n    \n    //form validation\n    $('#donationform').validate({\n        rules: {\n            nameInfo: \"required\",\n            emailInfo: {\n                required: true,\n                email: true\n            }\n            \n        },\n        messages: {\n            nameInfo: \"Please enter your name\",\n            emailInfo: \"Please enter a valid email address\"\n        }\n    });\n});\n\nfunction populateShowCaseModal(donationID) {\n    \n    var showCaseHeartSearch = H.heartData.filter(function (obj) {\n        return obj.justGivingID == donationID;\n    });\n    var showCaseHeartObject = showCaseHeartSearch[0];\n    //console.log(showCaseHeartObject);\n    if(showCaseHeartObject === undefined) {\n        alert(\"Not found\");\n        \n    }\n    else {\n        populateModal(showCaseHeartObject._id);\n    }\n}\n\nfunction populateModal(id){\n\n    // Variable equating the index in H.heartData\n    var clickedHeartIndex = H.heartData.map(function(arrayItem) { return arrayItem._id; }).indexOf(id);\n    // Variable equaling the clicked heart's Json \n    var clickedHeartObject = H.heartData[clickedHeartIndex];\n    if (clickedHeartObject.empty === \"true\") {\n        transferModal(); //go to the heart designer & donation modal instead\n    } else if(clickedHeartObject.anonymous === \"on\") {\n        \n        if(clickedHeartObject.dedicatedName){\n            //anonymous donation, with dedication\n            $('#heartBelongs').text(\"This heart was donated anonymously for \" + clickedHeartObject.dedicatedName);\n            $('#donationAmountCounter').text(\" Donation amount: $\" + clickedHeartObject.donation);\n            $('#donationAmount').text(clickedHeartObject.donation);\n            $('#donationMessage').text(clickedHeartObject.message);\n            $('#clickedHeartPic').html('<span id=\"greetingHeart\" class = \"heart ' + clickedHeartObject.color + ' epic activate\">' + clickedHeartObject.heartstyle + '</span>');\n        } else {\n            //completely anonymous\n            $('#heartBelongs').text(\"This heart was donated anonymously.\");\n            $('#donationAmountCounter').text(\" Donation amount: $\" + clickedHeartObject.donation);\n            $('#donationAmount').text(clickedHeartObject.donation);\n            $('#donationMessage').text(\"Great work SACH! Let's help save some more children!  :)\");\n            $('#clickedHeartPic').html('<span id=\"greetingHeart\" class = \"heart ' + clickedHeartObject.color + ' epic activate\">' + clickedHeartObject.heartstyle + '</span>');\n        }\n\n    }\n    \n    else {\n        //normal donation, all fields filled\n        // Heart Object Info\n        $('#heartBelongs').text(\"This heart belongs to \" + clickedHeartObject.dedicatedName + \" and was donated by \" + clickedHeartObject.fullname);\n        $('#donationAmountCounter').text(\" Donation amount: $\" + clickedHeartObject.donation);\n        $('#donationAmount').text(clickedHeartObject.donation);\n        $('#donationMessage').text(clickedHeartObject.message);\n        $('#clickedHeartPic').html('<span id=\"greetingHeart\" class = \"heart ' + clickedHeartObject.color + ' epic activate\">' + clickedHeartObject.heartstyle + '</span>');\n    }\n}\n\nfunction updateProgressBar(data) {\n        \n    var total = data.filter(function(obj){\n        return obj.empty === \"false\";\n    }).reduce(function(a,b){\n        return { donation: parseInt(a.donation) + parseInt(b.donation) }; \n    }).donation;\n    \n    if(total >= 10000){\n        percent = \"100%\";\n    }\n    else {\n       var percent = (total/10000).toFixed(2).toString().slice(2) + \"%\"; \n    }\n    $('#meterOutside span').text(\"$\" + total);\n    //console.log(percent);\n    setTimeout(function(){\n        $('#meter').velocity({\n          height: percent\n         }, {duration: 2000});\n        \n    },0)\n    \n}\n\nfunction onGetHearts() {\n    \n    if(qJustGivingID) {\n \n        var DuplicateHeartSearch = H.heartData.filter(function(obj) {\n            return obj.justGivingID == qJustGivingID;\n            }),\n        DuplicateHeartSearchObject = DuplicateHeartSearch[0];\n        console.log(DuplicateHeartSearchObject);\n        if (DuplicateHeartSearchObject === undefined || null) {\n            console.log('make a new heart');\n            addHeart();\n        } else {\n            console.log(\"don't make a new heart\");\n        }    \n    }\n    \n    console.log(\"onGetHearts called, totalHearts: \"+H.heartData.length + \"index: \" + H.chunkIndex);\n    var data = H.heartData;   \n    if(qViewHeart) {\n    activateModal();\n    populateShowCaseModal(qViewHeart);\n    }\n    //default heart Size\n        var heartSize = \"small\";\n    \n\n    if(H.heartLimit) {\n        return;\n    }\n    else {\n         var nextIndex = H.chunkIndex+H.page;\n    }\n    if( H.chunkIndex + H.page >= H.heartData.length ){\n        nextIndex = H.heartData.length;\n        H.heartLimit = true;\n    }\n    H.chunk = data.slice(H.chunkIndex, nextIndex);\n    $.each( H.chunk, function() {\n\n        //set size based on this.donation \n        if (this.donation >= 25) {\n            heartSize = 'epic';\n        } else if (this.donation >= 20) {\n            heartSize = 'xlarge';\n        } else if (this.donation >= 15) {\n            heartSize = 'large';\n        } else if (this.donation >= 10) {\n            heartSize = 'med';\n        } else if (this.donation >= 1) {\n            heartSize = 'small';\n        }\n        //create our heart\n        var heart = document.createElement('div');\n        $(heart)\n        //add heart style text and CSS classes per this piece of data\n        .html('<span>' + this.heartstyle + '</span></div>')\n        .addClass('heart ' + this.color + ' ' + heartSize + ' ' + \"activate\")\n        .data(\"id\", this._id)\n        .appendTo('#container');\n        setTimeout( function() { //for cascading animation, set a tiny delay between adding each one\n             H.container.packery('appended', heart);\n             H.container.packery('layout');\n             }, 10 );\n        \n    });\n\n        //H.container.packery('reloadItems');\n       // H.container.packery('layout');\n        H.chunkIndex = nextIndex;\n    \n}\n\nfunction addHeart() {\n       \n        var newUser = {\n            'email'         :   qEmail || null,    \n            'anonymous'     :   qAnonymous || null,    \n            'fullname'      :   qName || null,    \n            'donation'      :   qAmount || null,    \n            'message'       :   qMessage || null,    \n            'currency'      :   qCurrency || null,    \n            'color'         :   qColor || null,    \n            'heartstyle'    :   qStyle || null,    \n            'dedicatedEmail':   qdedicatedEmail || null,    \n            'dedicatedName' :   qdedicatedName || null,    \n            'justGivingID'  :   qJustGivingID || null,    \n            'empty': false\n        };\n        // Use AJAX to post the object to our adduser service\n        $.ajax({\n            type: 'POST',\n            data: newUser,\n            url: '/users/addheart',\n            dataType: 'JSON'\n        }).done(function( response ) {\n            thankYou();\n        });\n    }\n    \nfunction animate(data) {\n    // $.each($('.heart'), function( index, value ){\n    //     //console.log(index);\n    //     //console.log(value);\n    //     //setTimeout(function(){\n    //         H.container.packery('appended', value );\n    //         console.log('hit');\n        \n    //     //}, 3) \n    // })\n    //         H.container.packery('layout');\n    //     //H.container.packery('appended', $('.heart') );\n    //     //H.container.packery('layout');\n\n        \n        H.container.packery('appended', $('#container .heart') );\n        H.container.packery('layout');\n\n};\n    \nfunction waitForWebfonts(fonts, callback) {\n    var loadedFonts = 0;\n    for(var i = 0, l = fonts.length; i < l; ++i) {\n        (function(font) {\n            var node = document.createElement('span');\n            // Characters that vary significantly among different fonts\n            node.innerHTML = 'giItT1WQy@!-/#';\n            // Visible - so we can measure it - but not on the screen\n            node.style.position      = 'absolute';\n            node.style.left          = '-10000px';\n            node.style.top           = '-10000px';\n            // Large font size makes even subtle changes obvious\n            node.style.fontSize      = '300px';\n            // Reset any font properties\n            node.style.fontFamily    = 'sans-serif';\n            node.style.fontVariant   = 'normal';\n            node.style.fontStyle     = 'normal';\n            node.style.fontWeight    = 'normal';\n            node.style.letterSpacing = '0';\n            document.body.appendChild(node);\n\n            // Remember width with no applied web font\n            var width = node.offsetWidth;\n\n            node.style.fontFamily = font;\n\n            var interval;\n            function checkFont() {\n                // Compare current width with original width\n                if(node && node.offsetWidth != width) {\n                    ++loadedFonts;\n                    node.parentNode.removeChild(node);\n                    node = null;\n                }\n\n                // If all fonts have been loaded\n                if(loadedFonts >= fonts.length) {\n                    if(interval) {\n                        clearInterval(interval);\n                    }\n                    if(loadedFonts == fonts.length) {\n                        callback();\n                        return true;\n                    }\n                }\n            };\n\n            if(!checkFont()) {\n                interval = setInterval(checkFont, 100);\n            }\n        })(fonts[i]);\n    }\n};\n\n\n","undoManager":{"mark":92,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":213,"column":16},"end":{"row":213,"column":17},"action":"insert","lines":["5"]}]}],[{"group":"doc","deltas":[{"start":{"row":213,"column":17},"end":{"row":213,"column":18},"action":"insert","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":209,"column":13},"end":{"row":212,"column":14},"action":"remove","lines":["if(thisHeart.empty === \"false\") { ","                updateProgressBar(thisHeart.donation);","                //console.log(thisHeart.donation + \" \" + thisHeart.empty)","             }"]}]}],[{"group":"doc","deltas":[{"start":{"row":209,"column":12},"end":{"row":209,"column":13},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":207,"column":13},"end":{"row":207,"column":14},"action":"remove","lines":["$"]}]}],[{"group":"doc","deltas":[{"start":{"row":207,"column":13},"end":{"row":207,"column":14},"action":"insert","lines":["H"]}]}],[{"group":"doc","deltas":[{"start":{"row":207,"column":14},"end":{"row":207,"column":15},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":208,"column":13},"end":{"row":208,"column":14},"action":"remove","lines":["$"]}]}],[{"group":"doc","deltas":[{"start":{"row":208,"column":13},"end":{"row":208,"column":14},"action":"insert","lines":["H"]}]}],[{"group":"doc","deltas":[{"start":{"row":208,"column":14},"end":{"row":208,"column":15},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":209,"column":8},"end":{"row":209,"column":12},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":209,"column":4},"end":{"row":209,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":209,"column":0},"end":{"row":209,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":208,"column":43},"end":{"row":209,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":209,"column":16},"end":{"row":209,"column":17},"action":"remove","lines":["5"]},{"start":{"row":209,"column":16},"end":{"row":209,"column":17},"action":"insert","lines":["1"]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":11},"end":{"row":5,"column":12},"action":"remove","lines":["3"]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":11},"end":{"row":5,"column":12},"action":"insert","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":0},"end":{"row":58,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":4},"end":{"row":57,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":52},"end":{"row":48,"column":53},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":53},"end":{"row":48,"column":54},"action":"insert","lines":["|"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":54},"end":{"row":48,"column":55},"action":"insert","lines":["|"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":55},"end":{"row":48,"column":56},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":56},"end":{"row":48,"column":57},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":57},"end":{"row":48,"column":58},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":58},"end":{"row":48,"column":59},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":59},"end":{"row":48,"column":60},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":47,"column":61},"end":{"row":48,"column":0},"action":"insert","lines":["",""]},{"start":{"row":48,"column":0},"end":{"row":48,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":8},"end":{"row":48,"column":9},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":9},"end":{"row":48,"column":10},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":10},"end":{"row":48,"column":11},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":11},"end":{"row":48,"column":12},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":12},"end":{"row":48,"column":13},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":13},"end":{"row":48,"column":14},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":14},"end":{"row":48,"column":15},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":15},"end":{"row":48,"column":16},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":16},"end":{"row":48,"column":17},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":17},"end":{"row":48,"column":18},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":18},"end":{"row":48,"column":19},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":19},"end":{"row":48,"column":21},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":20},"end":{"row":48,"column":21},"action":"insert","lines":["D"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":21},"end":{"row":48,"column":22},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":22},"end":{"row":48,"column":23},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":20},"end":{"row":48,"column":23},"action":"remove","lines":["Dup"]},{"start":{"row":48,"column":20},"end":{"row":48,"column":46},"action":"insert","lines":["DuplicateHeartSearchObject"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":47},"end":{"row":48,"column":48},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":34},"end":{"row":41,"column":0},"action":"insert","lines":["",""]},{"start":{"row":41,"column":0},"end":{"row":41,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":4},"end":{"row":42,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":5},"end":{"row":42,"column":6},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":6},"end":{"row":42,"column":7},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":7},"end":{"row":42,"column":8},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":8},"end":{"row":42,"column":9},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":9},"end":{"row":42,"column":10},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":10},"end":{"row":42,"column":11},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":11},"end":{"row":42,"column":12},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":12},"end":{"row":42,"column":13},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":13},"end":{"row":42,"column":14},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":14},"end":{"row":42,"column":15},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":15},"end":{"row":42,"column":16},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":16},"end":{"row":42,"column":17},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":17},"end":{"row":42,"column":18},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":18},"end":{"row":42,"column":19},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":19},"end":{"row":42,"column":20},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":20},"end":{"row":42,"column":21},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":21},"end":{"row":42,"column":22},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":21},"end":{"row":42,"column":22},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":21},"end":{"row":42,"column":22},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":22},"end":{"row":42,"column":23},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":23},"end":{"row":42,"column":24},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":23},"end":{"row":42,"column":24},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":22},"end":{"row":42,"column":23},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":21},"end":{"row":42,"column":22},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":20},"end":{"row":42,"column":21},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":20},"end":{"row":42,"column":21},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":21},"end":{"row":42,"column":22},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":22},"end":{"row":42,"column":23},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":23},"end":{"row":42,"column":24},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":24},"end":{"row":42,"column":25},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":25},"end":{"row":42,"column":26},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":26},"end":{"row":42,"column":27},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":27},"end":{"row":42,"column":28},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":28},"end":{"row":42,"column":29},"action":"insert","lines":["H"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":29},"end":{"row":42,"column":30},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":30},"end":{"row":42,"column":31},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":31},"end":{"row":42,"column":32},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":32},"end":{"row":42,"column":33},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":33},"end":{"row":42,"column":34},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":34},"end":{"row":42,"column":35},"action":"insert","lines":["I"]},{"start":{"row":42,"column":35},"end":{"row":42,"column":37},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":35},"end":{"row":42,"column":37},"action":"remove","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":34},"end":{"row":42,"column":35},"action":"remove","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":34},"end":{"row":42,"column":36},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":4},"end":{"row":56,"column":15},"action":"remove","lines":["addHeart();"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":55,"column":13},"end":{"row":56,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":4},"end":{"row":43,"column":7},"action":"insert","lines":["// "]},{"start":{"row":45,"column":4},"end":{"row":45,"column":7},"action":"insert","lines":["// "]},{"start":{"row":46,"column":4},"end":{"row":46,"column":7},"action":"insert","lines":["// "]},{"start":{"row":47,"column":4},"end":{"row":47,"column":7},"action":"insert","lines":["// "]},{"start":{"row":48,"column":4},"end":{"row":48,"column":7},"action":"insert","lines":["// "]},{"start":{"row":49,"column":4},"end":{"row":49,"column":7},"action":"insert","lines":["// "]},{"start":{"row":50,"column":4},"end":{"row":50,"column":7},"action":"insert","lines":["// "]},{"start":{"row":51,"column":4},"end":{"row":51,"column":7},"action":"insert","lines":["// "]},{"start":{"row":52,"column":4},"end":{"row":52,"column":7},"action":"insert","lines":["// "]},{"start":{"row":53,"column":4},"end":{"row":53,"column":7},"action":"insert","lines":["// "]},{"start":{"row":54,"column":4},"end":{"row":54,"column":7},"action":"insert","lines":["// "]},{"start":{"row":55,"column":4},"end":{"row":55,"column":7},"action":"insert","lines":["// "]},{"start":{"row":56,"column":4},"end":{"row":56,"column":7},"action":"insert","lines":["// "]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":24},"end":{"row":161,"column":0},"action":"insert","lines":["",""]},{"start":{"row":161,"column":0},"end":{"row":161,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":161,"column":4},"end":{"row":162,"column":0},"action":"insert","lines":["",""]},{"start":{"row":162,"column":0},"end":{"row":162,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":162,"column":4},"end":{"row":175,"column":5},"action":"insert","lines":["    if(qJustGivingID) {","     ","        var DuplicateHeartSearch = H.heartData.filter(function(obj) {","            return obj.justGivingID == qJustGivingID;","        }),","        DuplicateHeartSearchObject = DuplicateHeartSearch[0];","        console.log(DuplicateHeartSearchObject);","        if (DuplicateHeartSearchObject === undefined || null) {","            console.log('make a new heart');","            addHeart();","        } else {","            console.log(\"don't make a new heart\");","        }    ","    }"]}]}],[{"group":"doc","deltas":[{"start":{"row":175,"column":4},"end":{"row":175,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":164,"column":0},"end":{"row":164,"column":4},"action":"insert","lines":["    "]},{"start":{"row":165,"column":0},"end":{"row":165,"column":4},"action":"insert","lines":["    "]},{"start":{"row":166,"column":0},"end":{"row":166,"column":4},"action":"insert","lines":["    "]},{"start":{"row":167,"column":0},"end":{"row":167,"column":4},"action":"insert","lines":["    "]},{"start":{"row":168,"column":0},"end":{"row":168,"column":4},"action":"insert","lines":["    "]},{"start":{"row":169,"column":0},"end":{"row":169,"column":4},"action":"insert","lines":["    "]},{"start":{"row":170,"column":0},"end":{"row":170,"column":4},"action":"insert","lines":["    "]},{"start":{"row":171,"column":0},"end":{"row":171,"column":4},"action":"insert","lines":["    "]},{"start":{"row":172,"column":0},"end":{"row":172,"column":4},"action":"insert","lines":["    "]},{"start":{"row":173,"column":0},"end":{"row":173,"column":4},"action":"insert","lines":["    "]},{"start":{"row":174,"column":0},"end":{"row":174,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":162,"column":0},"end":{"row":162,"column":4},"action":"remove","lines":["    "]},{"start":{"row":163,"column":0},"end":{"row":163,"column":4},"action":"remove","lines":["    "]},{"start":{"row":164,"column":0},"end":{"row":164,"column":4},"action":"remove","lines":["    "]},{"start":{"row":165,"column":0},"end":{"row":165,"column":4},"action":"remove","lines":["    "]},{"start":{"row":166,"column":0},"end":{"row":166,"column":4},"action":"remove","lines":["    "]},{"start":{"row":167,"column":0},"end":{"row":167,"column":4},"action":"remove","lines":["    "]},{"start":{"row":168,"column":0},"end":{"row":168,"column":4},"action":"remove","lines":["    "]},{"start":{"row":169,"column":0},"end":{"row":169,"column":4},"action":"remove","lines":["    "]},{"start":{"row":170,"column":0},"end":{"row":170,"column":4},"action":"remove","lines":["    "]},{"start":{"row":171,"column":0},"end":{"row":171,"column":4},"action":"remove","lines":["    "]},{"start":{"row":172,"column":0},"end":{"row":172,"column":4},"action":"remove","lines":["    "]},{"start":{"row":173,"column":0},"end":{"row":173,"column":4},"action":"remove","lines":["    "]},{"start":{"row":174,"column":0},"end":{"row":174,"column":4},"action":"remove","lines":["    "]},{"start":{"row":175,"column":0},"end":{"row":175,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":8},"end":{"row":166,"column":12},"action":"insert","lines":["    "]}]}]]},"ace":{"folds":[{"start":{"row":28,"column":34},"end":{"row":33,"column":4},"placeholder":"..."},{"start":{"row":64,"column":33},"end":{"row":77,"column":4},"placeholder":"..."},{"start":{"row":80,"column":44},"end":{"row":94,"column":0},"placeholder":"..."},{"start":{"row":96,"column":27},"end":{"row":133,"column":0},"placeholder":"..."},{"start":{"row":135,"column":34},"end":{"row":158,"column":0},"placeholder":"..."},{"start":{"row":260,"column":24},"end":{"row":278,"column":0},"placeholder":"..."},{"start":{"row":280,"column":43},"end":{"row":332,"column":0},"placeholder":"..."}],"scrolltop":960,"scrollleft":0,"selection":{"start":{"row":166,"column":12},"end":{"row":166,"column":12},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":60,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1430268729562}